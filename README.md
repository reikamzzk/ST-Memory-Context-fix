# 📚 记忆表格 & 隐藏楼层 (ST-Memory-Context)

<div align="center">

![版本](https://img.shields.io/badge/版本-4.5.4-blue)
![兼容](https://img.shields.io/badge/SillyTavern-1.13.5+-green)

**SillyTavern插件**
<br>
**结构化记忆 + 智能上下文管理**

</div>

---

## 📖 简介

这是一个集成了 **"自动记忆表格"** 和 **"智能隐藏楼层"** 的综合插件。

它不仅能帮你自动整理剧情、人物、物品信息，还能通过"滑动窗口"机制，在**绝对保留人设**的前提下隐藏旧的对话，极大地节省 Token 并防止上下文溢出，让你的 AI 永远“活在当下”且不忘“初心”。

---

## ✨ 核心功能

### 1. ✂️ 智能隐藏楼层 (省 Token 神器)
* **三明治切分法**：发送消息时，自动执行以下逻辑：
    * **头部 (Head)**：永久保留 **#0 楼**（包含系统指令、世界书、角色卡），确立人设不崩塌。
    * **中间 (Body)**：自动切除很久之前的旧对话，释放 Token。
    * **尾部 (Tail)**：保留你设定的 **最近 N 条** 对话（如最近 30 条），确保对话连贯。
* **无感体验**：只影响发送给 AI 的数据，酒馆界面的聊天记录**不会被删除**，随时可查。

### 2. 📊 自动记忆表格
* **9 大分类**：主线、支线、角色状态、人物档案、关系、世界设定、物品、约定、总结。
* **自动记录**：识别 AI 回复中的关键信息并自动填表。
* **AI 总结**：支持一键调用 AI 对表格内容进行摘要总结。

### 3. ☁️ 无感云同步
* **数据随身带**：支持云酒馆，随聊天文件自动同步。
* **多端切换**：在电脑、手机、平板之间无缝切换，无需手动导入导出。

### 4. 🎨 现代化 UI
* **磨砂玻璃**：全界面采用 Aero 磨砂玻璃风格，精致美观。
* **响应式布局**：完美适配电脑（流式布局）和手机（网格布局），操作顺手。
* **顶部入口**：直接集成在酒馆顶部工具栏，一键呼出。

---

## 🚀 安装方法

### 方法一：通过 URL 安装（推荐）

1. 打开 **SillyTavern** -> 点击顶部的 **扩展 (Extensions)** 图标。
2. 点击 **安装扩展 (Install Extension)**。
3. 在输入框粘贴仓库地址：
https://github.com/gaigai315/ST-Memory-Context

### 方法二：手动安装

1. 下载本仓库 ZIP 包。
2. 解压到 `SillyTavern/data/default-user/extensions/third-party/ST-Memory-Context` 文件夹下。
3. 重启酒馆。

---

## 🛠️ 快速上手

1.  **打开插件**：点击酒馆顶部工具栏的 **表格图标**。
2.  **开启功能**：点击插件界面右上角的 **⚙️ 配置** 按钮。
 * **全局开关**：勾选“启用记忆表格插件”。
 * **隐藏楼层**：勾选“启用隐藏楼层”，并设置保留层数（建议 20~50 层）。
 * **外观设置**：点击“🎨 主题”可自定义主题色和字体颜色。

---

## 📅 更新日志


---

## 📄 许可证

MIT License
